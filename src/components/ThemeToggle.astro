---
import { Icon } from "astro-icon/components";
---

<div class="flex items-center gap-2">
  <Icon
    name="heroicons:sun-solid"
    class="text-yellow-500 dark:text-yellow-300"
    width="16"
    height="16"
  />

  <button
    type="button"
    id="theme-toggle"
    class={`relative inline-flex items-center rounded-full transition-colors w-8 h-5 text-sm bg-gray-200 dark:bg-gray-700`}
    aria-label="Toggle dark mode"
  >
    <span
      class="absolute left-0 top-0 flex h-full w-full items-center justify-center transition-all duration-300 transform -translate-x-1/4 dark:translate-x-1/4"
    >
      <span
        class="rounded-full bg-white shadow-md transition-all duration-300 w-4 h-4"
      ></span>
    </span>
  </button>

  <Icon
    name="heroicons:moon-solid"
    class="text-indigo-500 dark:text-indigo-300"
    width="16"
    height="16"
  />
</div>

<script>
  function toggleTheme() {
    document.documentElement.classList.toggle("dark");
    localStorage.theme = document.documentElement.classList.contains("dark")
      ? "dark"
      : "light";
  }

  const toggleBtn = document.querySelector("#theme-toggle");
  toggleBtn?.addEventListener("click", toggleTheme);
</script>
